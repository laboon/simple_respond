#!/usr/bin/env ruby

require 'sinatra'

port = ARGV[0]
port ||= 80

response_file = ARGV[1]
response_file ||= 'response.json'

class SimpleRespond < Sinatra::Base

  set :port, port

  get '*' do
    content_type :json
    puts "Responding with #{response_file}"
    File.read(response_file)
  end

end

puts "Responding with #{response_file} on port #{port}"
SimpleRespond.run!